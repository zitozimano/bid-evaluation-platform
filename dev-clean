#!/bin/bash

echo "ðŸ”§ Cleaning development environment..."

echo "ðŸ›‘ Killing all Node processes..."
killall node 2>/dev/null

echo "ðŸ§¹ Freeing ports 3000, 3001, 4000..."
lsof -t -i:3000 | xargs -r kill -9
lsof -t -i:3001 | xargs -r kill -9
lsof -t -i:4000 | xargs -r kill -9

echo "ðŸ—‘ Removing caches..."
rm -rf apps/frontend-internal/.next
rm -rf apps/frontend-public/.next
rm -rf apps/backend/dist

echo "ðŸ§¼ Clearing pnpm store garbage..."
pnpm store prune

# OPTIONAL: Uncomment if you want full reinstall
# echo "ðŸ—‘ Removing node_modules..."
# rm -rf node_modules
# pnpm install

echo "âœ¨ Dev environment cleaned."
