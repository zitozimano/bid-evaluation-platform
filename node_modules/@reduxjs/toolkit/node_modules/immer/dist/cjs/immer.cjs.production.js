"use strict";var Ee=Object.defineProperty;var Ze=Object.getOwnPropertyDescriptor;var et=Object.getOwnPropertyNames;var tt=Object.prototype.hasOwnProperty;var rt=(e,t)=>{for(var r in t)Ee(e,r,{get:t[r],enumerable:!0})},nt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of et(t))!tt.call(e,a)&&a!==r&&Ee(e,a,{get:()=>t[a],enumerable:!(n=Ze(t,a))||n.enumerable});return e};var ot=e=>nt(Ee({},"__esModule",{value:!0}),e);var It={};rt(It,{Immer:()=>Se,applyPatches:()=>St,castDraft:()=>xt,castImmutable:()=>At,createDraft:()=>Pt,current:()=>De,enableArrayMethods:()=>Xe,enableMapSet:()=>Qe,enablePatches:()=>Je,finishDraft:()=>gt,freeze:()=>J,immerable:()=>j,isDraft:()=>C,isDraftable:()=>E,nothing:()=>K,original:()=>je,produce:()=>yt,produceWithPatches:()=>dt,setAutoFreeze:()=>pt,setUseStrictIteration:()=>mt,setUseStrictShallowCopy:()=>ht});module.exports=ot(It);var K=Symbol.for("immer-nothing"),j=Symbol.for("immer-draftable"),y=Symbol.for("immer-state");function O(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var N=Object,L=N.getPrototypeOf,ne="constructor",oe="prototype",ge="configurable",fe="enumerable",ue="writable",ae="value",C=e=>!!e&&!!e[y];function E(e){return e?Ue(e)||$(e)||!!e[j]||!!e[ne]?.[j]||q(e)||Y(e):!1}var at=N[oe][ne].toString(),ke=new WeakMap;function Ue(e){if(!e||!W(e))return!1;let t=L(e);if(t===null||t===N[oe])return!0;let r=N.hasOwnProperty.call(t,ne)&&t[ne];if(r===Object)return!0;if(!V(r))return!1;let n=ke.get(r);return n===void 0&&(n=Function.toString.call(r),ke.set(r,n)),n===at}function je(e){return C(e)||O(15,e),e[y].t}function k(e,t,r=!0){H(e)===0?(r?Reflect.ownKeys(e):N.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function H(e){let t=e[y];return t?t.r:$(e)?1:q(e)?2:Y(e)?3:0}var v=(e,t,r=H(e))=>r===2?e.has(t):N[oe].hasOwnProperty.call(e,t),z=(e,t,r=H(e))=>r===2?e.get(t):e[t],ie=(e,t,r,n=H(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Le(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var $=Array.isArray,q=e=>e instanceof Map,Y=e=>e instanceof Set,W=e=>typeof e=="object",V=e=>typeof e=="function",xe=e=>typeof e=="boolean";function Ve(e){let t=+e;return Number.isInteger(t)&&String(t)===e}var we=e=>W(e)?e?.[y]:null,D=e=>e.e||e.t,Be=e=>{let t=we(e);return t?t.e??t.t:e},Ae=e=>e.s?e.e:e.t;function ye(e,t){if(q(e))return new Map(e);if(Y(e))return new Set(e);if($(e))return Array[oe].slice.call(e);let r=Ue(e);if(t===!0||t==="class_only"&&!r){let n=N.getOwnPropertyDescriptors(e);delete n[y];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){let p=a[i],P=n[p];P[ue]===!1&&(P[ue]=!0,P[ge]=!0),(P.get||P.set)&&(n[p]={[ge]:!0,[ue]:!0,[fe]:P[fe],[ae]:e[p]})}return N.create(L(e),n)}else{let n=L(e);if(n!==null&&r)return{...e};let a=N.create(n);return N.assign(a,e)}}function J(e,t=!1){return se(e)||C(e)||!E(e)||(H(e)>1&&N.defineProperties(e,{set:Pe,add:Pe,clear:Pe,delete:Pe}),N.freeze(e),t&&k(e,(r,n)=>{J(n,!0)},!1)),e}function it(){O(2)}var Pe={[ae]:it};function se(e){return e===null||!W(e)?!0:N.isFrozen(e)}var G="MapSet",Q="Patches",de="ArrayMethods",Ie={};function B(e){let t=Ie[e];return t||O(0,e),t}var Ce=e=>!!Ie[e];function ce(e,t){Ie[e]||(Ie[e]=t)}var pe,X=()=>pe,st=(e,t)=>({o:[],i:e,l:t,F:!0,m:0,P:new Set,T:new Set,I:Ce(G)?B(G):void 0,E:Ce(de)?B(de):void 0});function Fe(e,t){t&&(e.x=B(Q),e.y=[],e.d=[],e.C=t)}function he(e){Me(e),e.o.forEach(ct),e.o=null}function Me(e){e===pe&&(pe=e.i)}var Ne=e=>pe=st(pe,e);function ct(e){let t=e[y];t.r===0||t.r===1?t.b():t.g=!0}function Re(e,t){t.m=t.o.length;let r=t.o[0];if(e!==void 0&&e!==r){r[y].s&&(he(t),O(4)),E(e)&&(e=Ke(t,e));let{x:a}=t;a&&a.M(r[y].t,e,t)}else e=Ke(t,r);return ut(t,e,!0),he(t),t.y&&t.C(t.y,t.d),e!==K?e:void 0}function Ke(e,t){if(se(t))return t;let r=t[y];if(!r)return Te(t,e.P,e);if(!be(r,e))return t;if(!r.s)return r.t;if(!r.u){let{f:n}=r;if(n)for(;n.length>0;)n.pop()(e);ve(r,e)}return r.e}function ut(e,t,r=!1){!e.i&&e.l.h&&e.F&&J(t,r)}function He(e){e.u=!0,e.a.m--}var be=(e,t)=>e.a===t,ft=[];function We(e,t,r,n){let a=D(e),i=e.r;if(n!==void 0&&z(a,n,i)===t){ie(a,n,r,i);return}if(!e.D){let P=e.D=new Map;k(a,(h,T)=>{if(C(T)){let o=P.get(T)||[];o.push(h),P.set(T,o)}})}let p=e.D.get(t)??ft;for(let P of p)ie(a,P,r,i)}function Ge(e,t,r){e.f.push(function(a){let i=t;if(!i||!be(i,a))return;a.I?.fixSetContents(i);let p=Ae(i);We(e,i.c??i,p,r),ve(i,a)})}function ve(e,t){if(e.s&&!e.u&&(e.r===3||e.r===1&&e.R||(e.n?.size??0)>0)){let{x:n}=t;if(n){let a=n.getPath(e);a&&n.O(e,a,t)}He(e)}}function Z(e,t,r){let{a:n}=e;if(C(r)){let a=r[y];be(a,n)&&a.f.push(function(){ee(e);let p=Ae(a);We(e,r,p,t)})}else E(r)&&e.f.push(function(){let i=D(e);e.r===3?i.has(r)&&Te(r,n.P,n):z(i,t,e.r)===r&&n.o.length>1&&(e.n.get(t)??!1)===!0&&e.e&&Te(z(e.e,t,e.r),n.P,n)})}function Te(e,t,r){return!r.l.h&&r.m<1||C(e)||t.has(e)||!E(e)||se(e)||(t.add(e),k(e,(n,a)=>{if(C(a)){let i=a[y];if(be(i,r)){let p=Ae(i);ie(e,n,p,e.r),He(i)}}else E(a)&&Te(a,t,r)})),e}function $e(e,t){let r=$(e),n={r:r?1:0,a:t?t.a:X(),s:!1,u:!1,n:void 0,i:t,t:e,c:null,e:null,b:null,S:!1,f:void 0},a=n,i=Oe;r&&(a=[n],i=me);let{revoke:p,proxy:P}=Proxy.revocable(a,i);return n.c=P,n.b=p,[P,n]}var Oe={get(e,t){if(t===y)return e;let r=e.a.E,n=e.r===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);let a=D(e);if(!v(a,t,e.r))return lt(e,a,t);let i=a[t];if(e.u||!E(i)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&Ve(t))return i;if(i===ze(e.t,t)){ee(e);let p=e.r===1?+t:t,P=te(e.a,i,e,p);return e.e[p]=P}return i},has(e,t){return t in D(e)},ownKeys(e){return Reflect.ownKeys(D(e))},set(e,t,r){let n=qe(D(e),t);if(n?.set)return n.set.call(e.c,r),!0;if(!e.s){let a=ze(D(e),t),i=a?.[y];if(i&&i.t===r)return e.e[t]=r,e.n.set(t,!1),!0;if(Le(r,a)&&(r!==void 0||v(e.t,t,e.r)))return!0;ee(e),R(e)}return e.e[t]===r&&(r!==void 0||t in e.e)||Number.isNaN(r)&&Number.isNaN(e.e[t])||(e.e[t]=r,e.n.set(t,!0),Z(e,t,r)),!0},deleteProperty(e,t){return ee(e),ze(e.t,t)!==void 0||t in e.t?(e.n.set(t,!1),R(e)):e.n.delete(t),e.e&&delete e.e[t],!0},getOwnPropertyDescriptor(e,t){let r=D(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[ue]:!0,[ge]:e.r!==1||t!=="length",[fe]:n[fe],[ae]:r[t]}},defineProperty(){O(11)},getPrototypeOf(e){return L(e.t)},setPrototypeOf(){O(12)}},me={};for(let e in Oe){let t=Oe[e];me[e]=function(){let r=arguments;return r[0]=r[0][0],t.apply(this,r)}}me.deleteProperty=function(e,t){return me.set.call(this,e,t,void 0)};me.set=function(e,t,r){return Oe.set.call(this,e[0],t,r,e[0])};function ze(e,t){let r=e[y];return(r?D(r):e)[t]}function lt(e,t,r){let n=qe(t,r);return n?ae in n?n[ae]:n.get?.call(e.c):void 0}function qe(e,t){if(!(t in e))return;let r=L(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=L(r)}}function R(e){e.s||(e.s=!0,e.i&&R(e.i))}function ee(e){e.e||(e.n=new Map,e.e=ye(e.t,e.a.l.A))}var Se=class{constructor(t){this.h=!0;this.A=!1;this._=!1;this.produce=(t,r,n)=>{if(V(t)&&!V(r)){let i=r;r=t;let p=this;return function(h=i,...T){return p.produce(h,o=>r.call(this,o,...T))}}V(r)||O(6),n!==void 0&&!V(n)&&O(7);let a;if(E(t)){let i=Ne(this),p=te(i,t,void 0),P=!0;try{a=r(p),P=!1}finally{P?he(i):Me(i)}return Fe(i,n),Re(a,i)}else if(!t||!W(t)){if(a=r(t),a===void 0&&(a=t),a===K&&(a=void 0),this.h&&J(a,!0),n){let i=[],p=[];B(Q).M(t,a,{y:i,d:p}),n(i,p)}return a}else O(1,t)};this.produceWithPatches=(t,r)=>{if(V(t))return(p,...P)=>this.produceWithPatches(p,h=>t(h,...P));let n,a;return[this.produce(t,r,(p,P)=>{n=p,a=P}),n,a]};xe(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),xe(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),xe(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){E(t)||O(8),C(t)&&(t=De(t));let r=Ne(this),n=te(r,t,void 0);return n[y].S=!0,Me(r),n}finishDraft(t,r){let n=t&&t[y];(!n||!n.S)&&O(9);let{a}=n;return Fe(a,r),Re(void 0,a)}setAutoFreeze(t){this.h=t}setUseStrictShallowCopy(t){this.A=t}setUseStrictIteration(t){this._=t}shouldUseStrictIteration(){return this._}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){let i=r[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(r=r.slice(n+1));let a=B(Q).N;return C(t)?a(t,r):this.produce(t,i=>a(i,r))}};function te(e,t,r,n){let[a,i]=q(t)?B(G).w(t,r):Y(t)?B(G).V(t,r):$e(t,r);return(r?.a??X()).o.push(a),i.f=r?.f??[],i.p=n,r&&n!==void 0?Ge(r,i,n):i.f.push(function(h){h.I?.fixSetContents(i);let{x:T}=h;i.s&&T&&T.O(i,[],h)}),a}function De(e){return C(e)||O(10,e),Ye(e)}function Ye(e){if(!E(e)||se(e))return e;let t=e[y],r,n=!0;if(t){if(!t.s)return t.t;t.u=!0,r=ye(e,t.a.l.A),n=t.a.l.shouldUseStrictIteration()}else r=ye(e,!0);return k(r,(a,i)=>{ie(r,a,Ye(i))},n),t&&(t.u=!1),r}function Je(){function t(u,m=[]){if(u.p!==void 0){let S=u.i.e??u.i.t,x=we(z(S,u.p)),A=z(S,u.p);if(A===void 0||A!==u.c&&A!==u.t&&A!==u.e||x!=null&&x.t!==u.t)return null;let I=u.i.r===3,s;if(I){let l=u.i;s=Array.from(l.o.keys()).indexOf(u.p)}else s=u.p;if(!(I&&S.size>s||v(S,s)))return null;m.push(s)}if(u.i)return t(u.i,m);m.reverse();try{r(u.e,m)}catch{return null}return m}function r(u,m){let S=u;for(let x=0;x<m.length-1;x++){let A=m[x];if(S=z(S,A),!W(S)||S===null)throw new Error(`Cannot resolve path at '${m.join("/")}'`)}return S}let n="replace",a="add",i="remove";function p(u,m,S){if(u.a.T.has(u))return;u.a.T.add(u);let{y:x,d:A}=S;switch(u.r){case 0:case 2:return h(u,m,x,A);case 1:return P(u,m,x,A);case 3:return T(u,m,x,A)}}function P(u,m,S,x){let{t:A,n:I}=u,s=u.e;s.length<A.length&&([A,s]=[s,A],[S,x]=[x,S]);let l=u.R===!0;for(let f=0;f<A.length;f++){let d=s[f],M=A[f];if((l||I?.get(f.toString()))&&d!==M){let _=d?.[y];if(_&&_.s)continue;let re=m.concat([f]);S.push({op:n,path:re,value:w(d)}),x.push({op:n,path:re,value:w(M)})}}for(let f=A.length;f<s.length;f++){let d=m.concat([f]);S.push({op:a,path:d,value:w(s[f])})}for(let f=s.length-1;A.length<=f;--f){let d=m.concat([f]);x.push({op:i,path:d})}}function h(u,m,S,x){let{t:A,e:I,r:s}=u;k(u.n,(l,f)=>{let d=z(A,l,s),M=z(I,l,s),b=f?v(A,l)?n:a:i;if(d===M&&b===n)return;let _=m.concat(l);S.push(b===i?{op:b,path:_}:{op:b,path:_,value:w(M)}),x.push(b===a?{op:i,path:_}:b===i?{op:a,path:_,value:w(d)}:{op:n,path:_,value:w(d)})})}function T(u,m,S,x){let{t:A,e:I}=u,s=0;A.forEach(l=>{if(!I.has(l)){let f=m.concat([s]);S.push({op:i,path:f,value:l}),x.unshift({op:a,path:f,value:l})}s++}),s=0,I.forEach(l=>{if(!A.has(l)){let f=m.concat([s]);S.push({op:a,path:f,value:l}),x.unshift({op:i,path:f,value:l})}s++})}function o(u,m,S){let{y:x,d:A}=S;x.push({op:n,path:[],value:m===K?void 0:m}),A.push({op:n,path:[],value:u})}function c(u,m){return m.forEach(S=>{let{path:x,op:A}=S,I=u;for(let d=0;d<x.length-1;d++){let M=H(I),b=x[d];typeof b!="string"&&typeof b!="number"&&(b=""+b),(M===0||M===1)&&(b==="__proto__"||b===ne)&&O(16+3),V(I)&&b===oe&&O(16+3),I=z(I,b),W(I)||O(16+2,x.join("/"))}let s=H(I),l=g(S.value),f=x[x.length-1];switch(A){case n:switch(s){case 2:return I.set(f,l);case 3:O(16);default:return I[f]=l}case a:switch(s){case 1:return f==="-"?I.push(l):I.splice(f,0,l);case 2:return I.set(f,l);case 3:return I.add(l);default:return I[f]=l}case i:switch(s){case 1:return I.splice(f,1);case 2:return I.delete(f);case 3:return I.delete(S.value);default:return delete I[f]}default:O(16+1,A)}}),u}function g(u){if(!E(u))return u;if($(u))return u.map(g);if(q(u))return new Map(Array.from(u.entries()).map(([S,x])=>[S,g(x)]));if(Y(u))return new Set(Array.from(u).map(g));let m=Object.create(L(u));for(let S in u)m[S]=g(u[S]);return v(u,j)&&(m[j]=u[j]),m}function w(u){return C(u)?g(u):u}ce(Q,{N:c,O:p,M:o,getPath:t})}function Qe(){class e extends Map{constructor(o,c){super();this[y]={r:2,i:c,a:c?c.a:X(),s:!1,u:!1,e:void 0,n:void 0,t:o,c:this,S:!1,g:!1,f:[]}}get size(){return D(this[y]).size}has(o){return D(this[y]).has(o)}set(o,c){let g=this[y];return p(g),(!D(g).has(o)||D(g).get(o)!==c)&&(r(g),R(g),g.n.set(o,!0),g.e.set(o,c),g.n.set(o,!0),Z(g,o,c)),this}delete(o){if(!this.has(o))return!1;let c=this[y];return p(c),r(c),R(c),c.t.has(o)?c.n.set(o,!1):c.n.delete(o),c.e.delete(o),!0}clear(){let o=this[y];p(o),D(o).size&&(r(o),R(o),o.n=new Map,k(o.t,c=>{o.n.set(c,!1)}),o.e.clear())}forEach(o,c){let g=this[y];D(g).forEach((w,u,m)=>{o.call(c,this.get(u),u,this)})}get(o){let c=this[y];p(c);let g=D(c).get(o);if(c.u||!E(g)||g!==c.t.get(o))return g;let w=te(c.a,g,c,o);return r(c),c.e.set(o,w),w}keys(){return D(this[y]).keys()}values(){let o=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{let c=o.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){let o=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{let c=o.next();if(c.done)return c;let g=this.get(c.value);return{done:!1,value:[c.value,g]}}}}[(y,Symbol.iterator)](){return this.entries()}}function t(h,T){let o=new e(h,T);return[o,o[y]]}function r(h){h.e||(h.n=new Map,h.e=new Map(h.t))}class n extends Set{constructor(o,c){super();this[y]={r:3,i:c,a:c?c.a:X(),s:!1,u:!1,e:void 0,t:o,c:this,o:new Map,g:!1,S:!1,n:void 0,f:[]}}get size(){return D(this[y]).size}has(o){let c=this[y];return p(c),c.e?!!(c.e.has(o)||c.o.has(o)&&c.e.has(c.o.get(o))):c.t.has(o)}add(o){let c=this[y];return p(c),this.has(o)||(i(c),R(c),c.e.add(o),Z(c,o,o)),this}delete(o){if(!this.has(o))return!1;let c=this[y];return p(c),i(c),R(c),c.e.delete(o)||(c.o.has(o)?c.e.delete(c.o.get(o)):!1)}clear(){let o=this[y];p(o),D(o).size&&(i(o),R(o),o.e.clear())}values(){let o=this[y];return p(o),i(o),o.e.values()}entries(){let o=this[y];return p(o),i(o),o.e.entries()}keys(){return this.values()}[(y,Symbol.iterator)](){return this.values()}forEach(o,c){let g=this.values(),w=g.next();for(;!w.done;)o.call(c,w.value,w.value,this),w=g.next()}}function a(h,T){let o=new n(h,T);return[o,o[y]]}function i(h){h.e||(h.e=new Set,h.t.forEach(T=>{if(E(T)){let o=te(h.a,T,h,T);h.o.set(T,o),h.e.add(o)}else h.e.add(T)}))}function p(h){h.g&&O(3,JSON.stringify(D(h)))}function P(h){if(h.r===3&&h.e){let T=new Set(h.e);h.e.clear(),T.forEach(o=>{h.e.add(Be(o))})}}ce(G,{w:t,V:a,fixSetContents:P})}function Xe(){let e=new Set(["shift","unshift"]),t=new Set(["push","pop"]),r=new Set([...t,...e]),n=new Set(["reverse","sort"]),a=new Set([...r,...n,"splice"]),i=new Set(["find","findLast"]),p=new Set(["filter","slice","concat","flat",...i,"findIndex","findLastIndex","some","every","indexOf","lastIndexOf","includes","join","toString","toLocaleString"]);function P(s){return a.has(s)}function h(s){return p.has(s)}function T(s){return P(s)||h(s)}function o(s,l){s.operationMethod=l}function c(s){s.operationMethod=void 0}function g(s,l,f=!0){ee(s);let d=l();return R(s),f&&s.n.set("length",!0),d}function w(s){s.R=!0}function u(s,l){return s<0?Math.max(l+s,0):Math.min(s,l)}function m(s,l,f){for(let d=0;d<f.length;d++){let M=l+d;s.n.set(M,!0),Z(s,M,f[d])}}function S(s,l,f){return g(s,()=>{let d=s.e.length,M=s.e[l](...f);return e.has(l)&&w(s),l==="push"&&f.length>0?m(s,d,f):l==="unshift"&&f.length>0&&m(s,0,f),r.has(l)?M:s.c})}function x(s,l,f){return g(s,()=>(s.e[l](...f),w(s),s.c),!1)}function A(s,l){return function(...d){let M=l;o(s,M);try{if(P(M)){if(r.has(M))return S(s,M,d);if(n.has(M))return x(s,M,d);if(M==="splice"){let b=g(s,()=>s.e.splice(...d));if(w(s),d.length>2){let _=u(d[0]??0,s.e.length);m(s,_,d.slice(2))}return b}}else return I(s,M,d)}finally{c(s)}}}function I(s,l,f){let d=D(s);if(l==="filter"){let M=f[0],b=[];for(let _=0;_<d.length;_++)M(d[_],_,d)&&b.push(s.c[_]);return b}if(i.has(l)){let M=f[0],b=l==="find",_=b?1:-1,re=b?0:d.length-1;for(let U=re;U>=0&&U<d.length;U+=_)if(M(d[U],U,d))return s.c[U];return}if(l==="slice"){let M=f[0]??0,b=f[1]??d.length,_=u(M,d.length),re=u(b,d.length),U=[];for(let _e=_;_e<re;_e++)U.push(s.c[_e]);return U}return d[l](...f)}ce(de,{createMethodInterceptor:A,isArrayOperationMethod:T,isMutatingArrayMethod:P})}var F=new Se,yt=F.produce,dt=F.produceWithPatches.bind(F),pt=F.setAutoFreeze.bind(F),ht=F.setUseStrictShallowCopy.bind(F),mt=F.setUseStrictIteration.bind(F),St=F.applyPatches.bind(F),Pt=F.createDraft.bind(F),gt=F.finishDraft.bind(F),xt=e=>e,At=e=>e;0&&(module.exports={Immer,applyPatches,castDraft,castImmutable,createDraft,current,enableArrayMethods,enableMapSet,enablePatches,finishDraft,freeze,immerable,isDraft,isDraftable,nothing,original,produce,produceWithPatches,setAutoFreeze,setUseStrictIteration,setUseStrictShallowCopy});
//# sourceMappingURL=immer.cjs.production.js.map